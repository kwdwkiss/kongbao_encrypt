<include file="Public:new" />
<link href="__PUBLIC__/xincss/css/register.css" rel="stylesheet" type="text/css" />
<script src="__PUBLIC__/xincss/long/public.js?v=727"></script>
<script src="http://libs.baidu.com/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/xincss/js/myfrom/artDialog4.1.7/artDialog.js?skin=green"></script>
<!--注册步骤提示-->
<div class="register-step">
	<div class="auto">
		<ul class="clearfix">
			<li class="step-now">①注册账号</li>
			<li>②完善资料</li>
			<li>③注册完成</li>
		</ul>
	</div>
</div>
<style type="text/css">
.STYLE3 {color: #FF0000}
 </style>
<!--注册主体-->
<script src="__PUBLIC__/xincss/js/zhuce/jquery.KinSlideshow-1.1.js" type="text/javascript"></script>
<div class="register-main">
	<div class="auto">
		<div class="register-box clearfix">
			<form id="register_form" method="post" action="{:U('binds')}"> 
	<input type="hidden" value="{$refer_id}" name="refer_id">  
				<div class="reg-left">

					<table cellspacing="0" cellpadding="0">

						<tr>
						<th width="80"></th>
							<td width="640">欢迎您!<span class="act-slogansa">【{$qqnickname}】</span>您已经成功登录：只差一步，即可完成登录！
								&nbsp;
							</td>
						</tr>
						<tr>
							<th width="80"><b>*</b>会员账号</th>
							<td width="640">
								<input type="text" id="user_name" name="user_name"  value="{$qqnickname}" size="30" />&nbsp;
							</td>
						</tr>

						<tr>
							<th><b>*</b>设置密码</th>
							<td><input type="password" id="pwd" name="pwd" maxlength="20"  />&nbsp;</td>
						</tr>
						<tr>
							<th></th>
							<td class="pwd-strength-box clearfix">
								<ul class="pwd-strength clearfix default-transition-children" style="width:260px">
									<li></li>
									<li></li>
									<li></li>
								</ul>
								<span class="show-pwd-level pwd-null" style="width:360px"></span>
								<span class="show-pwd-level pwd-short hide" style="width:360px">位数不足</span>
								<span class="show-pwd-level pwd-weak hide" style="width:360px">弱</span>
								<span class="show-pwd-level pwd-medium hide" style="width:360px">中</span>
								<span class="show-pwd-level pwd-strong hide" style="width:360px">强</span>
							</td>
							<td></td>
						</tr>

						<tr>
							<th><b>*</b>确认密码</th>
							<td>
								<input type="password" id="password_confirm"  name="password_confirm" maxlength="30"  />&nbsp;<span></span>
							</td>
						</tr>

						<tr>
							<th><b>*</b>注册邮箱</th>
							<td>
							<input type="text" id="email" name="email"  size="30"  placeholder="信息将发送到注册邮箱,请填写真实邮箱"/>&nbsp;
							</td>
						</tr>
						<tr>
						<th><b>*</b>注册QQ</th>
							<td>
								<input type="text" id="user_qq" name="user_qq" size="30"  />&nbsp;
							</td>
						</tr>
						<tr>
						<if condition="$reg_setting['telphone']==1">	
						<th><b>*</b>注册手机</th>
							<td>
							<input type="text" id="telphone" name="telphone" size="11" />&nbsp;
							</td>
						</tr>
						<tr>
						</if>
						<if condition="$reg_setting['reg_mibao']==1">
						<th><b>*</b>注册密保</th>
							<td>
							<select name="mibao_name" id="mibao_name"  >&nbsp;
  								<option value="">请您设置安全问题</option>
  								<volist name="mibao_setting" key="j" id="vo2">
  									<option value="{$vo2.name}">{$vo2.name}</option>
  								</volist>
  							    </select>
							</td>
						</tr>
						<tr>
						<th><b>*</b>密保答案</th>
							<td>
							<input type="text" name="mibao_daan" id="mibao_daan"  />&nbsp;
							</td>
						</tr>
						<tr></if>
						  <if condition="$reg_setting['verycode']==1">	
						<th ><b>*</b>验证码</th>
							<td>
							<input type="text" id="captcha" name="captcha" maxlength="4" class=" input-captcha input"  style="width:160px"/>&nbsp;
                          <img src="__URL__/verify/" title="" name="codeimage" border="0" id="codeimage" /><a href="javascript:void(0)" onClick="javascript:document.getElementById('codeimage').src='__URL__/verify/'+ Math.random();" >&nbsp;换一张</a>&nbsp;
							</td>
						</tr>
						<tr></if>
							<th></th>
							<td class="agreement-box">
								<label for="agreementCheckbox" id="checkboxLabel">
									<span class="checkbox-icon checkbox-icon-checked" id="checkboxTrigger"></span>
									<input type="checkbox" id="agreementCheckbox" class="agreement-checkbox" name="agreement" checked>我已阅读并同意<a  target="_blank">《{$config['sitename']}网站服务协议》</a>
								</label>
							</td>
						</tr>
						<tr>
							<th></th>
							<td>
								<input id="submitBtn" type="submit" value="下一步" class="reg-submit-gray reg-submit default-transition">
								<a href="javascript:void(0)"  onclick="art.dialog({title:'绑定已有账号',content:document.getElementById('get_bangding'),width:260,height:140,lock:true})">绑定已有账号</a>
							</td>
							<td></td>
						</tr>
						<tr>
							<th></th>
							<td colspan="2">
								<span class="act-slogan">注册成为{$config['sitename']}会员即可获得￥{$reg_setting['zs_money']}元 现金券！</span>
							</td>
						</tr>

					</table>
					</form>
				</div>
				<div class="reg-right">
					<div class="reg-tologin">已有专属账号&nbsp;<a href="{:U('User/uslogin')}" class="default-transition">登录</a></div>
					<div class="reg-award">
						<span class="act-slogan">注册有礼</span>
						<ul>
							<li>1.注册成功即可获得<span class="award-text">￥{$reg_setting['zs_money']}元 现金券</span></li>
							<li>2.享受<span class="award-text">1V1专席秘书</span>服务</li>
						</ul>
					</div>
					<div class="reg-help">
						<ul>
							<li class="reg-help-title">帮助中心</li>
							<volist name="gonggao_list" id="gonggao" offset="0" length="5">
					<li><a href="{:U('Gonggao/gonggao',array('id'=>$gonggao['id']))}" >{$gonggao["title"]|cut_str=###,20}</a></li>
					</volist>
						</ul>
					</div>
				</div>
				</div>
	</div>
</div>
<div class="getpass lbox" id="get_bangding" style="display: none" >
<style type="text/css">
.Annkela{ display:inline-block; height:35px; line-height:35px; background-color:#009FD9; border-radius:2px; color:#FFF; margin:0px 5px; padding:0px; padding-right:0px; text-decoration:none;}
 </style>
<div class="register-main">
	<div class="sauto">
		<div class="register-box clearfix">
				<div class="reg-left">
	<table cellspacing="0" cellpadding="0">
						<tr>
							<th width="80"><b>*</b>会员账号</th>
							<td width="240">
								<input type="text" id="user_name" name="user_name"  value="{$qqnickname}" size="130" />&nbsp;
							</td>
						</tr>
						<tr>
						<tr>
							<th><b>*</b>确认密码</th>
							<td>
								<input type="password" id="password_confirm"  name="password_confirm" maxlength="30"  />&nbsp;<span></span>
							</td>
						</tr>
							<th></th>
							<td>
							<input id="submitBtn" type="submit" value="立即绑定账号" class="reg-submit-gray reg-submit default-transition" onclick = "bind_account()">
							</td>
							<td></td>
						</tr>
						<tr>
					</table>
    </form>
    </td>
  </tr>
</table>
</div>		</div>
		</div>
	</div>
</div>
<include file="Public:newfoot" />
<script type="text/javascript" src="__PUBLIC__/xincss/js/zhuce/common2.2.js"></script>  
<script type="text/javascript" src="__PUBLIC__/xincss/js/zhuce/jquery.validation.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/xincss/js/zhuce/jquery.poshytip.min.js" charset="utf-8"></script> 
<script type="text/javascript" src="__PUBLIC__/xincss/js/zhuce/zhucheq.js"></script> 
<script type="text/javascript" src="__PUBLIC__/xincss/long/register.js"></script>
<script>
$(function () {
	$("#pwd").keyup(function (e) {
		var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
		var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
		var weakRegex = new RegExp("(?=.{6,}).*", "g");
		var $pwdLevelBar = $(".pwd-strength li");
		var $pwdLevelTxt = $(".show-pwd-level");
		if ($(this).val()) {
			if (false == weakRegex.test($(this).val())) {
				$pwdLevelBar.removeClass();
				$pwdLevelTxt.addClass("hide");
				$(".pwd-short").removeClass("hide");
			} else if (strongRegex.test($(this).val())) {
				$pwdLevelBar.removeClass();
				$pwdLevelBar.eq(0).addClass("levelbar-strong");
				$pwdLevelBar.eq(1).addClass("levelbar-strong");
				$pwdLevelBar.eq(2).addClass("levelbar-strong");
				$pwdLevelTxt.addClass("hide");
				$(".pwd-strong").removeClass("hide");
			} else if (mediumRegex.test($(this).val())) {
				$pwdLevelBar.removeClass();
				$pwdLevelBar.eq(0).addClass("levelbar-medium");
				$pwdLevelBar.eq(1).addClass("levelbar-medium");
				$pwdLevelTxt.addClass("hide");
				$(".pwd-medium").removeClass("hide");
			} else {
				$pwdLevelBar.removeClass();
				$pwdLevelBar.eq(0).addClass("levelbar-weak");
				$pwdLevelTxt.addClass("hide");
				$(".pwd-weak").removeClass("hide");
			}
			return true;
		} else {
			$pwdLevelBar.removeClass();
			$pwdLevelTxt.addClass("hide");
			$(".pwd-null").removeClass("hide");
		}

	});

	$("#agreementCheckbox").change(function () {
		var checkboxTrigger = $("#checkboxTrigger");
		var submitBtn = $("#submitBtn");
		if ($(this).prop("checked")) {
			checkboxTrigger.addClass("checkbox-icon-checked");
			submitBtn.addClass("reg-submit").attr("disabled", false);
		} else {
			checkboxTrigger.removeClass("checkbox-icon-checked");
			submitBtn.removeClass("reg-submit").attr("disabled", true);
		}
	});
</script>  

